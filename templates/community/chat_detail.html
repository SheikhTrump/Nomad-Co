{% extends "base.html" %}
{% block content %}
<div class="container">
    <h2>Chat</h2>
    <p>
        Chat with:
        {% for p in other_participants %}
            {{ p.name }} ({{ p.user_type }}){% if not loop.last %}, {% endif %}
        {% endfor %}
    </p>
    <hr>

    <div class="chat-box" style="border:1px solid #ccc; padding:10px; height:300px; overflow-y:scroll;">
        {% for message in messages %}
            <p>
                <strong>{{ message.user_name }}</strong>: {{ message.content }}
                <br><small>{{ message.timestamp.strftime('%Y-%m-%d %H:%M') if message.timestamp }}</small>
            </p>
        {% endfor %}
    </div>

    <form method="POST" action="{{ url_for('community.send_message', chat_id=chat._id) }}" class="mt-3">
        <div class="mb-3">
            <textarea name="content" class="form-control" rows="2" required></textarea>
        </div>
        <button class="btn btn-primary">Send</button>
    </form>
</div>
{% endblock %}
